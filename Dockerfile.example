# Dockerfile Example for bash-lib Installation
# This example shows how to install bash-lib in a Docker container

# Use a base image with bash
FROM ubuntu:22.04

# Set environment variables
ENV BASH__PATH=/opt/bash-lib
ENV DEBIAN_FRONTEND=noninteractive

# Install required packages
RUN apt-get update && apt-get install -y \
    curl \
    unzip \
    bash &&
    rm -rf /var/lib/apt/lists/*

# Method 1: Install using the Docker-optimized script
RUN curl -sSL https://raw.githubusercontent.com/openbiocure/bash-lib/main/install-docker.sh | bash

# Method 2: Alternative - Install using the main script (also works now)
# RUN curl -sSL https://raw.githubusercontent.com/openbiocure/bash-lib/main/install.sh | bash

# Method 3: Manual installation (if you prefer more control)
# RUN mkdir -p /opt/bash-lib && \
#     curl -sSL https://github.com/openbiocure/bash-lib/archive/refs/heads/main.zip -o /tmp/bash-lib.zip && \
#     unzip -q /tmp/bash-lib.zip -d /tmp && \
#     cp -r /tmp/bash-lib-main/* /opt/bash-lib/ && \
#     find /opt/bash-lib -name "*.sh" -type f -exec chmod +x {} \; && \
#     rm -rf /tmp/bash-lib.zip /tmp/bash-lib-main

# Set up bash-lib for the container
RUN echo "export BASH__PATH=/opt/bash-lib" >>/etc/bash.bashrc &&
    echo "source /opt/bash-lib/core/init.sh" >>/etc/bash.bashrc

# Verify installation
RUN bash -c "source /opt/bash-lib/core/init.sh && import console && console.info 'bash-lib installed successfully!'"

# Set the default command
CMD ["bash"]
